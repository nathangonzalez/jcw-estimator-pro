<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JCW Estimator - Demo Analytics Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; text-align: center; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .metric-card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .metric-value { font-size: 2em; font-weight: bold; margin-bottom: 5px; }
        .metric-label { color: #666; font-size: 0.9em; }
        .status-good { color: #28a745; }
        .status-warning { color: #ffc107; }
        .status-bad { color: #dc3545; }
        .chart-container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .table-container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-weight: 600; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; }
        .badge-good { background: #d4edda; color: #155724; }
        .badge-warning { background: #fff3cd; color: #856404; }
        .badge-bad { background: #f8d7da; color: #721c24; }
        .links { margin-top: 20px; }
        .links a { display: inline-block; margin-right: 15px; color: #007bff; text-decoration: none; }
        .links a:hover { text-decoration: underline; }
        canvas { max-width: 100%; height: 300px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ JCW Estimator - Demo Analytics Dashboard</h1>
            <p>Last updated: 2025-11-13 15:46:17 | SHA: e3990a3</p>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value status-good">73.3%</div>
                <div class="metric-label">Pass Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">11/15</div>
                <div class="metric-label">Tests Passed</div>
            </div>
            <div class="metric-card">
                <div class="metric-value status-bad">4</div>
                <div class="metric-label">Tests Failed</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">39ms</div>
                <div class="metric-label">P95 Duration</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">2</div>
                <div class="metric-label">Video Clips</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">10.6s</div>
                <div class="metric-label">Reel Duration</div>
            </div>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value">
                    <span class="badge badge-warning">‚ö†Ô∏è Needs Attention</span>
                </div>
                <div class="metric-label">Reel Status</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">
                    <span class="badge badge-good">‚úÖ OK</span>
                </div>
                <div class="metric-label">Interactive APIs</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">
                    <span class="badge badge-warning">‚è≥ Not Available</span>
                </div>
                <div class="metric-label">Finance Overlay</div>
            </div>
        </div>

        <div class="chart-container">
            <h3>üìà Pass Rate Trend (Last 10 Runs)</h3>
            <canvas id="passRateChart"></canvas>
        </div>

        <div class="chart-container">
            <h3>üé• Video Coverage Trend</h3>
            <canvas id="videoChart"></canvas>
        </div>

        <div class="table-container">
            <h3>üß™ Latest Test Results</h3>
            <table>
                <thead>
                    <tr>
                        <th>Test Name</th>
                        <th>Status</th>
                        <th>Duration</th>
                        <th>File</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <td>UAT Interactive - Health check</td>
                        <td>‚úÖ passed</td>
                        <td>26ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - Assess endpoint with PDF</td>
                        <td>‚úÖ passed</td>
                        <td>39ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - QnA endpoint processes answers</td>
                        <td>‚ùå failed</td>
                        <td>38ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - Assess validation errors</td>
                        <td>‚úÖ passed</td>
                        <td>32ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - Assess endpoint happy-path with request_id</td>
                        <td>‚úÖ passed</td>
                        <td>26ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - QnA endpoint with empty questions returns 422</td>
                        <td>‚úÖ passed</td>
                        <td>13ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - QnA endpoint with well-formed payload returns 200</td>
                        <td>‚úÖ passed</td>
                        <td>37ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - QnA validation errors</td>
                        <td>‚úÖ passed</td>
                        <td>16ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - Question generation determinism</td>
                        <td>‚úÖ passed</td>
                        <td>34ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                    <tr>
                        <td>UAT Interactive - Files cleanup</td>
                        <td>‚úÖ passed</td>
                        <td>4ms</td>
                        <td>uat.interactive.spec.ts</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="links">
            <h3>üîó Related Links</h3>
            <a href="playwright-report/index.html">üìä Playwright Report</a>
            <a href="uat/UAT_REEL_V2.mp4">üé¨ Demo Reel V2</a>
            <a href="uat/UAT_ANNOTATED.mp4">üìπ Annotated Video</a>
            <a href="metrics/run.json">üìÑ Latest Run JSON</a>
            <a href="metrics/summary.json">üìà Trends Summary</a>
        </div>
    </div>

    <script src="data:text/javascript;base64,ZnVuY3Rpb24gZHJhd0NoYXJ0KGNhbnZhcywgZGF0YSwgbGFiZWwsIGNvbG9yKSB7CiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgyZCk7CiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aDsKICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7CiAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLmRhdGEpOwogICAgY29uc3QgbWluVmFsdWUgPSBNYXRoLm1pbihNYXRoLm1pbihkYXRhLmZpbHRlcih4ID0+IHggIT09IG51bGwpKSwgMCk7CiAgICBjb25zdCByYW5nZSA9IG1heFZhbHVlIC0gbWluVmFsdWUgfHwgMTsKCiAgICAvLyBEcmF3IGJhY2tncm91bmQKICAgIGN0eC5maWxsU3R5bGUgPSAnI2Y4ZjlmYSc7CiAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CgogICAgLy8gRHJhdyBsaW5lCiAgICBjdHguYmVnaW5QYXRoKCk7CiAgICBjdHguU3Ryb2tlU3R5bGUgPSBjb2xvcjsKICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgY29uc3Qgc3RlcCA9IHdpZHRoIC8gKGRhdGEubGVuZ3RoIC0gMSk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB4ID0gaSAqIHN0ZXA7CiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2ldOwogICAgICAgIGNvbnN0IHkgPSBoZWlnaHQgLSAoKHZhbHVlIC0gbWluVmFsdWUpIC8gcmFuZ2UgKiBoZWlnaHQgKiAwLjgpOwogICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgY3R4Lm1vdmVUbygxMCwgeSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3R4LmxpbmVUbygxMCArIHgsIHkpOwogICAgICAgIH0KICAgIH0KICAgIGN0eC5zdHJva2UoKTsKCiAgICAvLyBEcmF3IHBvaW50cwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgeCA9IDEwICsgaSAqIHN0ZXA7CiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2ldOwogICAgICAgIGNvbnN0IHkgPSBoZWlnaHQgLSAoKHZhbHVlIC0gbWluVmFsdWUpIC8gcmFuZ2UgKiBoZWlnaHQgKiAwLjgpOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHguYXJjKHgsIHksIDMsIDAsIDJfTWF0aC5QSSk7CiAgICAgICAgY3R4LmZpbGwoKTsKICAgIH0KfQoKLy8gUGFzcyByYXRlIGNoYXJ0CmNvbnN0IHBhc3NSYXRlQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3NSYXRlQ2hhcnQnKTsKaWYgKHBhc3NSYXRlQ2FudmFzKSB7CiAgICBkcmF3Q2hhcnQocGFzc1JhdGVDYW52YXMsIHBhc3NSYXRlRGF0YSwgJ1Bhc3MgUmF0ZScsICcjMjhhNzQ1Jyk7Cn0KCi8vIFZpZGVvIGNsaXBzIGNoYXJ0CmNvbnN0IHZpZGVvQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvQ2hhcnQnKTsKaWYgKHZpZGVvQ2FudmFzKSB7CiAgICBkcmF3Q2hhcnQodmlkZW9DYW52YXMsIHZpZGVvQ2xpcHNEYXRhLCAnVmlkZW8gQ2xpcHMnLCAnIzY2N0VFQScpOwp9"></script>

    <script>
        {chart_data}
    </script>
</body>
</html>