prompts/F-IN-003.md
Title

Finance v0.3 — Forecast & Burn (company-wide) from canonical ledger

Mode

DEV-FAST (local only). No force push. Keep raw bank PDFs out of git.

Inputs (already in repo)

Canonical ledger: data/financial/working/transactions.csv

Optional categories: data/financial/categories.seed.yaml

Guardrails

Write/commit only:

scripts/finance_forecast.py

scripts/finance_burn.py

scripts/finance_run.ps1 (append new steps)

output/FINANCE_FORECAST.md, output/FINANCE_FORECAST.html

output/FINANCE_BURN.md, output/FINANCE_BURN.html

output/FINANCE_RUN.md (append run summary)

data/financial/working/forecast_assumptions.yaml (editable knobs)

Tasks

Assumptions file
Create data/financial/working/forecast_assumptions.yaml with safe defaults:

start_month: "2025-01-01"      # ISO date of first forecast month
horizon_months: 6              # project forward N months
working_capital_buffer: 0      # optional positive buffer
smoothing_window_days: 14      # moving average for cash-in/out baselines
seasonality: {}                # optional per-month multipliers { "01": 1.05, ... }


Forecast engine
Add scripts/finance_forecast.py:

Load transactions.csv.

Build daily cash-in and cash-out from categories:

Inflows: type=credit (or positive amount) + categories not in ["payroll","materials","insurance","fuel"].

Outflows: type=debit (or negative amount) + those categories (and all negatives).

Compute:

Rolling daily net, 14-day SMA (from assumptions).

Project forward horizon_months monthly buckets:

Baseline = recent monthly average of net (last 90 days).

Apply seasonality if present; add working_capital_buffer once to starting balance.

Emit:

output/FINANCE_FORECAST.md with summary table (month, projected inflow, projected outflow, projected net, ending cash).

output/FINANCE_FORECAST.html (simple HTML table + sparkline via inline SVG; no external deps).

Burn & runway
Add scripts/finance_burn.py:

Compute last 30/60/90-day burn (avg monthly net outflow).

Compute runway = current bank balance proxy:

Use cumulative sum of transactions.csv to get last day balance proxy (or 0 if unknown).

Runway months = balance / |avg monthly burn| (if burn > 0).

Top 10 expense categories and vendors YTD.

Emit:

output/FINANCE_BURN.md

output/FINANCE_BURN.html (HTML tables)

Runner: extend v0.2
Update scripts/finance_run.ps1 to append:

python scripts/finance_forecast.py `
  --assumptions data/financial/working/forecast_assumptions.yaml `
  --ledger data/financial/working/transactions.csv
python scripts/finance_burn.py `
  --ledger data/financial/working/transactions.csv


Append a "Forecast & Burn" section to output/FINANCE_RUN.md with:

forecast months, starting balance proxy, projected ending balance next month

30/60/90-day burn + runway months

Dependencies

No new packages required (use stdlib + python-dateutil already present).

Commit
git add data/financial/working/forecast_assumptions.yaml `
  scripts/finance_forecast.py scripts/finance_burn.py scripts/finance_run.ps1 `
  output/FINANCE_FORECAST.md output/FINANCE_FORECAST.html `
  output/FINANCE_BURN.md output/FINANCE_BURN.html output/FINANCE_RUN.md
git commit -m "feat(finance): add Forecast v0 and Burn/Runway from canonical ledger"
git push origin HEAD

Acceptance

output/FINANCE_FORECAST.md shows ≥ horizon rows with month totals and ending cash.

output/FINANCE_BURN.md lists 30/60/90-day burn + runway months.

output/FINANCE_RUN.md updated with a Forecast & Burn section.

What you do

Reply here: "Approve: F-IN-003"
Then tell Cline:

Create prompts/F-IN-003.md with the content I'll provide, run scripts/finance_run.ps1, commit and push per the prompt.

I'll review the commit, sanity-check the math, and prep F-IN-004 (invoice + A/R rollup) next.
